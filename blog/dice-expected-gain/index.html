<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Expected Gain of Tossing a Dice</title>
  <meta name="author" content="Lisha Li">

  <link href="http://lisafly.github.io/atom.xml" type="application/atom+xml" rel="alternate"
        title="Lisha Li's Blog Atom Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://lisafly.github.io/favicon.png" rel="icon">
  <link href="http://lisafly.github.io/theme/css/main_2.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://lisafly.github.io/theme/js/modernizr-2.0.js"></script>
  <script src="http://lisafly.github.io/theme/js/ender.js"></script>
  <script src="http://lisafly.github.io/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
      
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type= "text/javascript">
       MathJax.Hub.Config({
           config: ["MMLorHTML.js"],
           jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML"],
           TeX: { extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"], equationNumbers: { autoNumber: "AMS" } },
           extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js"],
           tex2jax: { 
               inlineMath: [ ['$','$'] ],
               displayMath: [ ['$$','$$'] ],
               processEscapes: true },
           "HTML-CSS": {
               styles: { ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
           }
       });
    </script>

</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://lisafly.github.io/">Lisha Li's Blog</a></h1>
    <h2>It's never too late to learn.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://lisafly.github.io/atom.xml" rel="subscribe-rss">RSS</a></li>
</ul>

<form action="http://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:http://lisafly.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<ul class="main-navigation">
    <li><a href="http://lisafly.github.io">Home</a></li>
    <li><a href="http://lisafly.github.io">Blog</a></li>
    <li><a href="http://lisafly.github.io/archives.html">Archives</a></li>
    <li><a href="http://lisafly.github.io/pages/about.html">About</a></li>
    <li><a href="http://lisafly.github.io/pages/resume.html">Resume</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Expected Gain of Tossing a Dice</h1>
      <p class="meta"><time datetime="2013-10-30T09:37:39" pubdate>Oct 30, 2013</time></p>
</header>

  <div class="entry-content"><p><img src="http://dclong.github.io/media/dice/dice.png" height="200" width="240" align="right"/></p>
<p>Suppose you toss a symmetric dice. 
You are allowed to quit the game and
get money which equals the total points you get at any time if 6 has never
showed up. Whenever 6 shows up, the game is over and you get nothing. For
example, if the first three tosses turn out to be 2, 3 and 5 you can quit the
game immediately and gain 10 dollars or you can choose to continue the game.
What is the expected gains of this game?</p>
<p>First we have to decide how to play the game, i.e. when to quit the game.
Suppose $T$ is the total points we get now.
If we choose to continue the game, the distribution of our profit is presented in <a href="http://dclong.github.io/media/dice/tables.pdf">Table 1</a>.
So our net profit is $\frac{15-T}{6}$ if we choose to continue the game,
which suggests us quit the game when $T\ge15$.
Let's use $W$ to denote the final gain in this game,
then $W$ can be either 0 or some element in $A\equiv{15, 16, 17, 18, 19}$.
To find the expected gains,
we have to find the distribution of $W$,
i.e. we have to find $P(W=i)$, $i\in A$.
There're at least two ways to do this.
One of them is to use the powerful tool Markov Chain and the other is to use recursion formula.</p>
<h2>Method I: Markov Chain</h2>
<p>Let's use ${X_n}$, $n\in \mathbb{N}$ to stand for the total points we get at step $n$.
Let $X_0=0$; $X_k=s$ (just a symbol to avoid confusion with the other states of ${X_n}$) for $k\ge n$ if the tossing result turns out to 6 at step $n$;
$X_k=t$ for $k\ge n$ if $X_n=t\in A$.
It's easy to check that ${X_n}$ is a Markov Chain and its limiting distribution is what we are interested in.
The transition probability matrix of ${X_n}$ is given in <a href="http://dclong.github.io/media/dice/tables.pdf">Table 1</a>.
The probabilities that $W=i$ where $i\in A$,
are the probabilities that $X_n$ ends in the corresponding states,
i.e. $lim_n P(X_n=i)$, $i\in A$.
To find these limiting probabilities, we need to find the limit of $P^n$ (actually we only care about the limit property of the second row of the transition matrix since $X_0=0$).
With the help of R, we can easily find these probabilities which are given below:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="n">probs</span><span class="p">.</span><span class="n">pos</span>
<span class="mi">15</span>         <span class="mi">16</span>         <span class="mi">17</span>         <span class="mi">18</span>         <span class="mi">19</span>
<span class="mf">0.13128076</span> <span class="mf">0.10092009</span> <span class="mf">0.07407628</span> <span class="mf">0.04813533</span> <span class="mf">0.02337223</span>
</pre></div>


<p>So the average gain of this game is</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="n">probs</span><span class="p">.</span><span class="n">pos</span><span class="o">%*%</span><span class="mi">15</span><span class="o">:</span><span class="mi">19</span>
<span class="p">[,</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,]</span> <span class="mf">6.153738</span>
</pre></div>


<h2>Method II: Recursion Formula</h2>
<p>Let ${X_n}$, $n\in \mathbb{N}$ and $A$ be the same as in Method I.
Let $E_{t,n}$ be the event that $X_n=t, X_{n-1}&lt;t$ 
and $P_{t,n}\equiv P(E_{t,n})$,
then $P_{t,n}$ stands for the probability that we first achieve total points $t$ at step $n$.
Specially for $t\in A$, $P_{t,n}$ stand for the probability that the game ends with total points at step $n$.
Let $P_t\equiv \sum_{n\ge0} P_{t,n}$, then $P_t$, $t\in A$ are what we're interested in.
Conditioning $E_{t,n}$ on the value $X_{n-1}$ takes, we have the following recursion formula
$$
P_{t,n}=\frac{1}{6}P_{t-1,n-1}+\frac{1}{6}P_{t-2,n-1} +\frac{1}{6}P_{t-3,n-1}\
    +\frac{1}{6}P_{t-4,n-1} +\frac{1}{6}P_{t-5,n-1},\text{ for } 0&lt;t\le 15,\ n\ge1.<br />
$$</p>
<p>Because the game is over when $t\ge15$,
we have different formulas for $t&gt;15$ and $n\ge1$</p>
<p>$$
P_{16,n}=\frac{1}{6}P_{14,n-1}+\frac{1}{6}P_{13,n-1}+\frac{1}{6}P_{12,n-1}+\frac{1}{6}P_{11,n-1},
$$</p>
<p>$$ P_{17,n}=\frac{1}{6}P_{14,n-1}+\frac{1}{6}P_{13,n-1}+\frac{1}{6}P_{12,n-1}, $$</p>
<p>$$ P_{18,n}=\frac{1}{6}P_{14,n-1}+\frac{1}{6}P_{13,n-1},$$</p>
<p>$$ P_{19,n}=\frac{1}{6}P_{14,n-1}.  $$</p>
<p>It's obvious that $P_{t,0}=0$ for $t&gt;0$.
Sum the above formulas over $n$ from 1 to $\infty$ we have
$$
P_{t}=\frac{1}{6}P_{t-1}+\frac{1}{6}P_{t-2}+\frac{1}{6}P_{t-3}
+\frac{1}{6}P_{t-4}+\frac{1}{6}P_{t-5},\text{ for } 0&lt;t\le 15,
$$</p>
<p>$$ P_{16}=\frac{1}{6}P_{14}+\frac{1}{6}P_{13}+\frac{1}{6}P_{12}+\frac{1}{6}P_{11}, $$</p>
<p>$$P_{17}=\frac{1}{6}P_{14}+\frac{1}{6}P_{13}+\frac{1}{6}P_{12},$$</p>
<p>$$P_{18}=\frac{1}{6}P_{14}+\frac{1}{6}P_{13},$$</p>
<p>$$P_{19}=\frac{1}{6}P_{14}.$$</p>
<p>To solve this system, we have to ascertain the initial values.
It's not hard to find values for $P_0,\ldots,P_4$, however,
we can make things even easier by extending the recursion formula forward to term
$P_{-4}$.
Under this extension, the initial conditions for this system are as follows</p>
<p>$$ P_{-4}=P_{-3}=P_{-2}=P_{-1}=0 \text{ and } P_0=1.  $$</p>
<p>Now we can find values for $P_t$, $t\in A$ easily.
One way is to use method of generating functions to find the general term for $P_t$ when $t\le15$ and then calculate $P_t$ for $t\in A$.
Another easier way and more practical way is use computer to find these values directly based on these formulas given above.
The implementation in Mathmatica and the corresponding result are as follows. 
Notice that their is a built-in function called <code>LinearRecurrence</code> in Mathematica which 
does a similar job to the function <code>LinearRecursion</code> here. </p>
<div class="highlight"><pre><span class="n">LinearRecursion</span><span class="o">::</span><span class="n">SmallOrder</span> <span class="o">=</span> <span class="s">&quot;The order of the linear recursive equation must be at least 2.&quot;</span><span class="p">;</span>
<span class="n">LinearRecursion</span><span class="o">::</span><span class="n">NotMatch</span> <span class="o">=</span> <span class="s">&quot;The length of argument &#39;coef&#39; doesn&#39;t match the length of &#39;initial&#39;.&quot;</span><span class="p">;</span>
<span class="n">LinearRecursion</span><span class="p">[</span><span class="n">n_</span><span class="p">,</span> <span class="n">ini_</span><span class="p">,</span> <span class="n">coef_</span><span class="o">:</span> <span class="n">Null</span><span class="p">,</span> <span class="n">start_</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">irev_</span><span class="o">:</span> <span class="n">False</span><span class="p">,</span> <span class="n">crev_</span><span class="o">:</span> <span class="n">False</span><span class="p">]</span> <span class="o">:=</span>
<span class="n">Module</span><span class="p">[{</span><span class="n">nmax</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">initials</span><span class="p">},</span>
    <span class="n">order</span> <span class="o">=</span> <span class="n">Length</span><span class="p">[</span><span class="n">ini</span><span class="p">];</span>
    <span class="n">If</span><span class="p">[</span><span class="n">order</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Message</span><span class="p">[</span><span class="n">LinearRecursion</span><span class="o">::</span><span class="n">SmallOrder</span><span class="p">];</span> <span class="n">Return</span><span class="p">[]];</span>
    <span class="n">If</span><span class="p">[</span><span class="n">coef</span> <span class="o">===</span> <span class="n">Null</span><span class="p">,</span>
        <span class="n">coefficient</span> <span class="o">=</span> <span class="n">Table</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">{</span><span class="n">order</span><span class="p">}],</span>
        <span class="n">If</span><span class="p">[</span><span class="n">Length</span><span class="p">[</span><span class="n">coef</span><span class="p">]</span> <span class="o">!=</span> <span class="n">order</span><span class="p">,</span>
            <span class="n">Message</span><span class="p">[</span><span class="n">LinearRecursion</span><span class="o">::</span><span class="n">NotMatch</span><span class="p">];</span> <span class="n">Return</span><span class="p">[],</span>
            <span class="n">coefficient</span> <span class="o">=</span> <span class="n">coef</span>
        <span class="p">]</span>
    <span class="p">];</span>
    <span class="n">If</span><span class="p">[</span><span class="n">irev</span><span class="p">,</span> <span class="n">initials</span> <span class="o">=</span> <span class="n">Reverse</span><span class="p">[</span><span class="n">ini</span><span class="p">],</span> <span class="n">initials</span> <span class="o">=</span> <span class="n">ini</span><span class="p">];</span>
    <span class="n">If</span><span class="p">[</span><span class="n">crev</span><span class="p">,</span> <span class="n">coefficient</span> <span class="o">=</span> <span class="n">Reverse</span><span class="p">[</span><span class="n">coefficient</span><span class="p">]];</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">nmax</span> <span class="o">=</span> <span class="n">Max</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
    <span class="n">If</span><span class="p">[</span><span class="n">nmax</span> <span class="o">&lt;=</span> <span class="n">order</span><span class="p">,</span> <span class="n">Return</span><span class="p">[</span><span class="n">initials</span><span class="p">[[</span><span class="n">index</span><span class="p">]]]];</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">Table</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="n">nmax</span><span class="p">}];</span>
    <span class="n">result</span><span class="p">[[</span><span class="n">Table</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">order</span><span class="p">}]]]</span> <span class="o">=</span> <span class="n">initials</span><span class="p">;</span>
    <span class="n">For</span><span class="p">[</span><span class="n">i</span> <span class="o">=</span> <span class="n">order</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">nmax</span><span class="p">,</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span>
        <span class="n">result</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[[</span><span class="n">Table</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="p">{</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">order</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">}]]].</span><span class="n">coefficient</span>
    <span class="p">];</span>
    <span class="n">result</span><span class="p">[[</span><span class="n">index</span><span class="p">]]</span>
<span class="p">]</span>

<span class="n">In</span><span class="p">[</span><span class="mi">142</span><span class="p">]</span><span class="o">:=</span>
<span class="n">ini</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
<span class="n">coef</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">};</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">coef</span><span class="p">[[</span><span class="mi">1</span><span class="p">]];</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">coef</span><span class="p">[[</span><span class="mi">2</span><span class="p">]];</span>
<span class="n">c3</span> <span class="o">=</span> <span class="n">coef</span><span class="p">[[</span><span class="mi">3</span><span class="p">]];</span>
<span class="n">c4</span> <span class="o">=</span> <span class="n">coef</span><span class="p">[[</span><span class="mi">4</span><span class="p">]];</span>
<span class="n">c5</span> <span class="o">=</span> <span class="n">coef</span><span class="p">[[</span><span class="mi">5</span><span class="p">]];</span>
<span class="n">p11</span> <span class="o">=</span> <span class="n">LinearRecursion</span><span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="n">ini</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">];</span>
<span class="n">p12</span> <span class="o">=</span> <span class="n">LinearRecursion</span><span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="n">ini</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">];</span>
<span class="n">p13</span> <span class="o">=</span> <span class="n">LinearRecursion</span><span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="n">ini</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">];</span>
<span class="n">p14</span> <span class="o">=</span> <span class="n">LinearRecursion</span><span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="n">ini</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">];</span>
<span class="n">p15</span> <span class="o">=</span> <span class="n">LinearRecursion</span><span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="n">ini</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">];</span>
<span class="n">p16</span> <span class="o">=</span> <span class="n">c5</span> <span class="n">p11</span> <span class="o">+</span> <span class="n">c4</span> <span class="n">p12</span> <span class="o">+</span> <span class="n">c3</span> <span class="n">p13</span> <span class="o">+</span> <span class="n">c2</span> <span class="n">p14</span><span class="p">;</span>
<span class="n">p17</span> <span class="o">=</span> <span class="n">c5</span> <span class="n">p12</span> <span class="o">+</span> <span class="n">c4</span> <span class="n">p13</span> <span class="o">+</span> <span class="n">c3</span> <span class="n">p14</span><span class="p">;</span>
<span class="n">p18</span> <span class="o">=</span> <span class="n">c5</span> <span class="n">p13</span> <span class="o">+</span> <span class="n">c4</span> <span class="n">p14</span><span class="p">;</span>
<span class="n">p19</span> <span class="o">=</span> <span class="n">c5</span> <span class="n">p14</span><span class="p">;</span>
<span class="n">probs</span> <span class="o">=</span> <span class="p">{</span><span class="n">p15</span><span class="p">,</span> <span class="n">p16</span><span class="p">,</span> <span class="n">p17</span><span class="p">,</span> <span class="n">p18</span><span class="p">,</span> <span class="n">p19</span><span class="p">};</span>
<span class="n">gain</span> <span class="o">=</span> <span class="n">probs</span><span class="p">.</span><span class="n">Table</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">19</span><span class="p">}]</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">159</span><span class="p">]</span><span class="o">=</span>
<span class="mi">2893395172951</span><span class="o">/</span><span class="mi">470184984576</span>
</pre></div>


<p>The implementation in R and the corresponding result are as below. </p>
<div class="highlight"><pre><span class="err">#</span><span class="s1">&#39; @param n is the subscript of the array to be calculated</span>
<span class="s1">#&#39;</span> <span class="err">@</span><span class="nx">param</span> <span class="nx">ini</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">initial</span> <span class="nx">values</span> <span class="nx">vector</span> <span class="nx">starting</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">first</span> <span class="nx">term</span>
<span class="err">#&#39;</span> <span class="err">@</span><span class="nx">param</span>  <span class="nx">coef</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">coefficients</span> <span class="nx">vector</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">linear</span> <span class="nx">recursion</span> <span class="nx">equation</span>
<span class="nx">fibo</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">ini</span><span class="p">,</span><span class="nx">coef</span><span class="o">=</span><span class="nx">rep</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">length</span><span class="p">(</span><span class="nx">ini</span><span class="p">)),</span><span class="nx">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nx">irev</span><span class="o">=</span><span class="nx">FALSE</span><span class="p">,</span><span class="nx">crev</span><span class="o">=</span><span class="nx">FALSE</span><span class="p">){</span>
    <span class="nx">order</span><span class="o">=</span><span class="nx">length</span><span class="p">(</span><span class="nx">ini</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">order</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">)</span>
    <span class="nx">stop</span><span class="p">(</span><span class="s2">&quot;the order of the difference equation must be at least 2.&quot;</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">length</span><span class="p">(</span><span class="nx">coef</span><span class="p">)</span><span class="o">!=</span><span class="nx">order</span><span class="p">)</span>
    <span class="nx">stop</span><span class="p">(</span><span class="s2">&quot;the lengths of the coefficents vector and the initial</span>
<span class="s2">    values vector must be the same.&quot;</span><span class="p">)</span>
    <span class="nx">n</span><span class="o">=</span><span class="nx">n</span><span class="o">-</span><span class="nx">start</span><span class="o">+</span><span class="mi">1</span>
    <span class="nx">nmax</span><span class="o">=</span><span class="nx">max</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">nmax</span><span class="o">&lt;=</span><span class="nx">order</span><span class="p">)</span>
    <span class="k">return</span><span class="p">(</span><span class="nx">ini</span><span class="cp">[</span><span class="nb">n</span><span class="cp">]</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">irev</span><span class="p">)</span>
    <span class="nx">ini</span><span class="o">=</span><span class="nx">rev</span><span class="p">(</span><span class="nx">ini</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">crev</span><span class="p">)</span>
    <span class="nx">coef</span><span class="o">=</span><span class="nx">rev</span><span class="p">(</span><span class="nx">coef</span><span class="p">)</span>
    <span class="nx">result</span><span class="o">=</span><span class="nx">rep</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">nmax</span><span class="p">)</span>
    <span class="nx">result</span><span class="cp">[</span><span class="mi">1</span><span class="p">:</span><span class="k">order</span><span class="cp">]</span><span class="o">=</span><span class="nx">ini</span>
    <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="k">in</span> <span class="p">(</span><span class="nx">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">nmax</span><span class="p">)</span>
    <span class="nx">result</span><span class="cp">[</span><span class="nx">i</span><span class="cp">]</span><span class="o">=</span><span class="nx">result</span><span class="cp">[</span><span class="p">(</span><span class="nx">i</span><span class="na">-order</span><span class="p">):(</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="cp">]</span><span class="o">%*%</span><span class="nx">coef</span>
    <span class="k">return</span><span class="p">(</span><span class="nx">result</span><span class="cp">[</span><span class="nb">n</span><span class="cp">]</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">ini</span><span class="o">=</span><span class="nx">c</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="nx">coef</span><span class="o">=</span><span class="nx">rep</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
<span class="nx">c1</span><span class="o">=</span><span class="nx">coef</span><span class="cp">[</span><span class="mi">1</span><span class="cp">]</span>
<span class="nx">c2</span><span class="o">=</span><span class="nx">coef</span><span class="cp">[</span><span class="mi">2</span><span class="cp">]</span>
<span class="nx">c3</span><span class="o">=</span><span class="nx">coef</span><span class="cp">[</span><span class="mi">3</span><span class="cp">]</span>
<span class="nx">c4</span><span class="o">=</span><span class="nx">coef</span><span class="cp">[</span><span class="mi">4</span><span class="cp">]</span>
<span class="nx">c5</span><span class="o">=</span><span class="nx">coef</span><span class="cp">[</span><span class="mi">5</span><span class="cp">]</span>
<span class="nx">p11</span><span class="o">=</span><span class="nx">fibo</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="nx">ini</span><span class="p">,</span><span class="nx">coef</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="nx">p12</span><span class="o">=</span><span class="nx">fibo</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="nx">ini</span><span class="p">,</span><span class="nx">coef</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="nx">p13</span><span class="o">=</span><span class="nx">fibo</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="nx">ini</span><span class="p">,</span><span class="nx">coef</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="nx">p14</span><span class="o">=</span><span class="nx">fibo</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="nx">ini</span><span class="p">,</span><span class="nx">coef</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="nx">p15</span><span class="o">=</span><span class="nx">fibo</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="nx">ini</span><span class="p">,</span><span class="nx">coef</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="nx">p16</span><span class="o">=</span><span class="nx">c5</span><span class="o">*</span><span class="nx">p11</span><span class="o">+</span><span class="nx">c4</span><span class="o">*</span><span class="nx">p12</span><span class="o">+</span><span class="nx">c3</span><span class="o">*</span><span class="nx">p13</span><span class="o">+</span><span class="nx">c2</span><span class="o">*</span><span class="nx">p14</span>
<span class="nx">p17</span><span class="o">=</span><span class="nx">c5</span><span class="o">*</span><span class="nx">p12</span><span class="o">+</span><span class="nx">c4</span><span class="o">*</span><span class="nx">p13</span><span class="o">+</span><span class="nx">c3</span><span class="o">*</span><span class="nx">p14</span>
<span class="nx">p18</span><span class="o">=</span><span class="nx">c5</span><span class="o">*</span><span class="nx">p13</span><span class="o">+</span><span class="nx">c4</span><span class="o">*</span><span class="nx">p14</span>
<span class="nx">p19</span><span class="o">=</span><span class="nx">c5</span><span class="o">*</span><span class="nx">p14</span>
<span class="nx">probs</span><span class="o">=</span><span class="nx">c</span><span class="p">(</span><span class="nx">p15</span><span class="p">,</span><span class="nx">p16</span><span class="p">,</span><span class="nx">p17</span><span class="p">,</span><span class="nx">p18</span><span class="p">,</span><span class="nx">p19</span><span class="p">)</span>
<span class="nx">gain</span><span class="o">=</span><span class="nx">probs</span><span class="o">%*%</span><span class="mi">15</span><span class="o">:</span><span class="mi">19</span>
<span class="o">&gt;</span> <span class="nx">gain</span>
<span class="cp">[</span><span class="p">,</span><span class="mi">1</span><span class="cp">]</span>
<span class="cp">[</span><span class="mi">1</span><span class="p">,</span><span class="cp">]</span> <span class="mf">6.153738</span>
</pre></div>


<p>We can easily generalize this problem by assume the dice to be a nonsymmetric one with $f$ faces having arbitrary points on it.
Both of the two above methods can apply to the generalized problem,
however the second method is simpler for this kind of problems.</p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Chuanlong (Ben) Du</span>
  </span>
<time datetime="2013-10-30T09:37:39" pubdate>Oct 30, 2013</time>  <span class="categories">
    <a class="category" href="http://lisafly.github.io/tag/mathematica.html">Mathematica</a>
    <a class="category" href="http://lisafly.github.io/tag/recursion.html">recursion</a>
    <a class="category" href="http://lisafly.github.io/tag/statistics.html">statistics</a>
    <a class="category" href="http://lisafly.github.io/tag/probability.html">probability</a>
    <a class="category" href="http://lisafly.github.io/tag/markov-chain.html">Markov chain</a>
    <a class="category" href="http://lisafly.github.io/tag/fun-problems.html">fun problems</a>
  </span>
</p>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://lisafly.github.io/blog/compress-and-decompress-in-linux/">Compress and Decompressing Archives in Linux</a>
      </li>
      <li class="post">
          <a href="http://lisafly.github.io/blog/useful-tools-linux/">Useful Tools in Linux</a>
      </li>
      <li class="post">
          <a href="http://lisafly.github.io/blog/macro-in-sas/">Macro in SAS</a>
      </li>
      <li class="post">
          <a href="http://lisafly.github.io/blog/general-tips-for-sas/">General Tips for SAS</a>
      </li>
      <li class="post">
          <a href="http://lisafly.github.io/blog/sas-data-manipulation/">Manipulate Data in SAS</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://lisafly.github.io/category/fun-problem.html">fun problem</a></li>
        <li><a href="http://lisafly.github.io/category/fun-problems.html">Fun Problems</a></li>
        <li><a href="http://lisafly.github.io/category/linux.html">Linux</a></li>
        <li><a href="http://lisafly.github.io/category/programming.html">Programming</a></li>
        <li><a href="http://lisafly.github.io/category/research.html">Research</a></li>
        <li><a href="http://lisafly.github.io/category/software.html">Software</a></li>
        <li><a href="http://lisafly.github.io/category/statistics.html">Statistics</a></li>
        <li><a href="http://lisafly.github.io/category/windows.html">Windows</a></li>
        <li><a href="http://lisafly.github.io/category/work.html">Work</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
  <p class="tagcloud">
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/lock.html">lock</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/mutex.html">mutex</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/compile.html">compile</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/permutation.html">permutation</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/remote.html">remote</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/dropbox.html">Dropbox</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/concurrency.html">concurrency</a>
          </span>
          <span class="tag-5">
              <a href="http://lisafly.github.io/tag/probability.html">probability</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/recursion.html">recursion</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/loop.html">loop</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/override.html">override</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/os.html">OS</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/work.html">Work</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/coin.html">coin</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/pdf.html">PDF</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/sas.html">SAS</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/python.html">Python</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/network.html">network</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/pattern.html">pattern</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/email.html">email</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/character.html">character</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/operator.html">operator</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/server.html">server</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/distribution.html">distribution</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/de.html">DE</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/vector.html">vector</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/debian.html">Debian</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/markov-chain.html">Markov chain</a>
          </span>
          <span class="tag-1">
              <a href="http://lisafly.github.io/tag/programming.html">programming</a>
          </span>
          <span class="tag-4">
              <a href="http://lisafly.github.io/tag/matlab.html">MATLAB</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/rcpp.html">Rcpp</a>
          </span>
          <span class="tag-4">
              <a href="http://lisafly.github.io/tag/statistics.html">statistics</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/bash.html">bash</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/ubuntu.html">Ubuntu</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/jekyll.html">Jekyll</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/function.html">function</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/synchronization.html">synchronization</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/formula.html">formula</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/anti-virus.html">anti-virus</a>
          </span>
          <span class="tag-4">
              <a href="http://lisafly.github.io/tag/fun-problems.html">fun problems</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/require.html">require</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/stochastic.html">stochastic</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/windows.html">Windows</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/math.html">math</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/terminal.html">terminal</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/verizon.html">verizon</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/io.html">IO</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/hpc.html">HPC</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/portable.html">portable</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/puzzle.html">puzzle</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/sequence.html">sequence</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/skills.html">skills</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/vbvbnet.html">VB/VB.net</a>
          </span>
          <span class="tag-4">
              <a href="http://lisafly.github.io/tag/software.html">software</a>
          </span>
          <span class="tag-5">
              <a href="http://lisafly.github.io/tag/mathematica.html">Mathematica</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/graphics.html">graphics</a>
          </span>
          <span class="tag-3">
              <a href="http://lisafly.github.io/tag/linux.html">Linux</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/shell.html">shell</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/rng.html">RNG</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/vim.html">Vim</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/configuration.html">configuration</a>
          </span>
          <span class="tag-3">
              <a href="http://lisafly.github.io/tag/java.html">Java</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/regex.html">regex</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/image.html">image</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/list.html">list</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/plot.html">plot</a>
          </span>
          <span class="tag-5">
              <a href="http://lisafly.github.io/tag/ruby.html">Ruby</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/array.html">array</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/mt.html">MT</a>
          </span>
          <span class="tag-2">
              <a href="http://lisafly.github.io/tag/r.html">R</a>
          </span>
          <span class="tag-5">
              <a href="http://lisafly.github.io/tag/tips.html">tips</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/parallel.html">parallel</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/martingale.html">martingale</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/number.html">number</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/package.html">package</a>
          </span>
          <span class="tag-5">
              <a href="http://lisafly.github.io/tag/string.html">string</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/backup.html">backup</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/ide.html">IDE</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/web.html">Web</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/chinese.html">Chinese</a>
          </span>
          <span class="tag-5">
              <a href="http://lisafly.github.io/tag/latex.html">Latex</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/debug.html">debug</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/data-frame.html">data frame</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/d.html">D</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/thread.html">thread</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/bug.html">bug</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/julia.html">Julia</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/eclipse.html">Eclipse</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/matrix.html">matrix</a>
          </span>
          <span class="tag-6">
              <a href="http://lisafly.github.io/tag/research.html">research</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/library.html">library</a>
          </span>
          <span class="tag-5">
              <a href="http://lisafly.github.io/tag/cc.html">C/C++</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/condition.html">condition</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/phone.html">phone</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/trick.html">trick</a>
          </span>
          <span class="tag-4">
              <a href="http://lisafly.github.io/tag/c.html">C++</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/office.html">office</a>
          </span>
          <span class="tag-7">
              <a href="http://lisafly.github.io/tag/compiler.html">compiler</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/trap.html">trap</a>
          </span>
          <span class="tag-8">
              <a href="http://lisafly.github.io/tag/ssh.html">SSH</a>
          </span>
  </p>
  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/dclong">@dclong</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://lisafly.github.io/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'dclong',
              count: 3,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://lisafly.github.io/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="http://www.linkedin.com/pub/chuanlong-ben-du/21/9b2/123/" target="_blank">LinkedIn</a></li>
            <li><a href="https://twitter.com/longendu" target="_blank">Twitter</a></li>
            <li><a href="https://www.facebook.com/chuanlong.du" target="_blank">Facebook</a></li>
        <!--
            <li><a href="http://lisafly.github.io/" type="application/rss+xml" rel="alternate">RSS</a></li>
            -->
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Lisha Li -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30259661-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
	<script type="text/javascript">
	  var disqus_shortname = 'dclong';
          var disqus_identifier = '/blog/dice-expected-gain/';
          var disqus_url = 'http://lisafly.github.io/blog/dice-expected-gain/';
          var disqus_title = 'Expected Gain of Tossing a Dice';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>